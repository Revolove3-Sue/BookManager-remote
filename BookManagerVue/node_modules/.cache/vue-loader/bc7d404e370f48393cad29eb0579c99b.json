{"remainingRequest":"F:\\Android程序设计\\clone\\BookManager-remote\\BookManagerVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\Android程序设计\\clone\\BookManager-remote\\BookManagerVue\\src\\views\\login\\index.vue?vue&type=style&index=1&id=37dfd6fc&lang=scss&scoped=true","dependencies":[{"path":"F:\\Android程序设计\\clone\\BookManager-remote\\BookManagerVue\\src\\views\\login\\index.vue","mtime":1733919393407},{"path":"F:\\Android程序设计\\clone\\BookManager-remote\\BookManagerVue\\node_modules\\css-loader\\dist\\cjs.js","mtime":1731240388619},{"path":"F:\\Android程序设计\\clone\\BookManager-remote\\BookManagerVue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1731240397866},{"path":"F:\\Android程序设计\\clone\\BookManager-remote\\BookManagerVue\\node_modules\\postcss-loader\\src\\index.js","mtime":1731240394573},{"path":"F:\\Android程序设计\\clone\\BookManager-remote\\BookManagerVue\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1731240396600},{"path":"F:\\Android程序设计\\clone\\BookManager-remote\\BookManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1731240387242},{"path":"F:\\Android程序设计\\clone\\BookManager-remote\\BookManagerVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1731240397865}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCiRiZzogIzJkM2E0YjsKJGRhcmtfZ3JheTogIzIyMjsKJGxpZ2h0X2dyYXk6ICMyMjI7CgoubG9naW4tY29udGFpbmVyIHsKICBtaW4taGVpZ2h0OiAxMDAlOwogIHdpZHRoOiAxMDAlOwogIC8vYmFja2dyb3VuZC1jb2xvcjogJGJnOwogIG92ZXJmbG93OiBoaWRkZW47CiAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCIuLi8uLi9hc3NldHMv5Zu+5Lmm6aaGLmpwZyIpOwogIGJhY2tncm91bmQtc2l6ZTogMTAwJTsKCiAgLmxvZ2luLWZvcm0gewogICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgd2lkdGg6IDUyMHB4OwogICAgbWF4LXdpZHRoOiAxMDAlOwogICAgLy9wYWRkaW5nOiAxNjBweCAzNXB4IDA7CiAgICBwYWRkaW5nOiAzMHB4OwogICAgbWFyZ2luOiAwIGF1dG87CiAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNTAsMjUwLDI1MCwwLjgpOwoKICB9CgogIC50aXBzIHsKICAgIGZvbnQtc2l6ZTogMTRweDsKICAgIGNvbG9yOiAjMjIyOwogICAgbWFyZ2luLWJvdHRvbTogMTBweDsKCiAgICBzcGFuIHsKICAgICAgJjpmaXJzdC1vZi10eXBlIHsKICAgICAgICBtYXJnaW4tcmlnaHQ6IDE2cHg7CiAgICAgIH0KICAgIH0KICB9CgogIC5zdmctY29udGFpbmVyIHsKICAgIHBhZGRpbmc6IDZweCA1cHggNnB4IDE1cHg7CiAgICBjb2xvcjogJGRhcmtfZ3JheTsKICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7CiAgICB3aWR0aDogMzBweDsKICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKCiAgICBmb250LXNpemU6IDIwcHg7CiAgfQoKICAudGl0bGUtY29udGFpbmVyIHsKICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKCiAgICAudGl0bGUgewogICAgICBmb250LXNpemU6IDI2cHg7CiAgICAgIGNvbG9yOiAkbGlnaHRfZ3JheTsKICAgICAgbWFyZ2luOiAwcHggYXV0byA0MHB4IGF1dG87CiAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgICB9CiAgfQoKICAuc2hvdy1wd2QgewogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgcmlnaHQ6IDEwcHg7CiAgICB0b3A6IDdweDsKICAgIGZvbnQtc2l6ZTogMTZweDsKICAgIGNvbG9yOiAkZGFya19ncmF5OwogICAgY3Vyc29yOiBwb2ludGVyOwogICAgdXNlci1zZWxlY3Q6IG5vbmU7CiAgfQp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2LA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/login","sourcesContent":["<template>\n  <div class=\"login-container\">\n    <div style=\"display: flex; width: 500px; height: 400px; margin: auto; position: absolute; top: 0; left: 0; right: 0; bottom: 0;\">\n      <el-form ref=\"loginForm\" :model=\"loginForm\" :rules=\"loginRules\" class=\"login-form\" auto-complete=\"on\" label-position=\"left\">\n        <!-- 标题 -->\n        <div class=\"title-container\">\n          <h3 class=\"title\">登录图书管理系统</h3>\n        </div>\n        <!-- 用户名 -->\n        <el-form-item prop=\"username\">\n          <span class=\"svg-container\">\n            <i class=\"el-icon-a-052\" style=\"font-size: 24px\"></i>\n          </span>\n          <el-input class=\"yuan\" ref=\"username\" v-model=\"loginForm.username\" placeholder=\"请输入用户名\" name=\"username\" type=\"text\" tabindex=\"1\" auto-complete=\"on\" />\n        </el-form-item>\n        <!-- 密码 -->\n        <el-form-item prop=\"password\">\n          <span class=\"svg-container\">\n            <i class=\"el-icon-a-051\" style=\"font-size: 24px\"></i>\n          </span>\n          <el-input class=\"yuan\" :key=\"passwordType\" ref=\"password\" v-model=\"loginForm.password\" :type=\"passwordType\" placeholder=\"请输入密码\" name=\"password\" tabindex=\"2\" auto-complete=\"on\" @keyup.enter.native=\"handleLogin\" />\n          <span class=\"show-pwd\" @click=\"showPwd\">\n            <svg-icon :icon-class=\"passwordType === 'password' ? 'eye' : 'eye-open'\" />\n          </span>\n        </el-form-item>\n        <!-- 权限 -->\n        <el-form-item prop=\"authority\">\n          <span class=\"svg-container\">\n            <i class=\"iconfont icon-r-setting\" style=\"font-size: 24px\"></i>\n          </span>\n          <el-select v-model=\"loginForm.isadmin\" placeholder=\"请选择\" style=\"width: 300px\">\n            <el-option :key=\"0\" label=\"读者\" :value=\"0\"></el-option>\n            <el-option :key=\"1\" label=\"管理员\" :value=\"1\"></el-option>\n          </el-select>\n        </el-form-item>\n        <!-- 添加验证码部分 -->\n        <el-form-item prop=\"captcha\">\n          <span class=\"svg-container\">\n            <i class=\"el-icon-lock\" style=\"font-size: 24px\"></i>\n          </span>\n          <el-input class=\"yuan\" v-model=\"loginForm.captcha\" placeholder=\"请输入验证码\" name=\"captcha\" type=\"text\" tabindex=\"3\" />\n          <div class=\"captcha-container\">\n            <img :src=\"captchaSrc\" alt=\"验证码\" class=\"captcha-img\" @click=\"refreshCaptcha\" />\n            <button type=\"button\" class=\"refresh-btn\" @click=\"refreshCaptcha\">刷新验证码</button>\n          </div>\n        </el-form-item>\n        <!-- 登录按钮 -->\n        <div style=\"height: 40px; margin-bottom: 30px\">\n          <el-button :disabled=\"loading\" type=\"primary\" style=\"width: 48%; float: left; font-size: 22px\" @click.native.prevent=\"handleLogin\">登录</el-button>\n          <el-button :disabled=\"loading\" type=\"success\" style=\"width: 48%; float: right; font-size: 22px\" @click.native.prevent=\"handleRegister\">注册</el-button>\n        </div>\n      </el-form>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Login\",\n  data() {\n    const validateUsername = (rule, value, callback) => {\n      callback();\n    };\n    const validatePassword = (rule, value, callback) => {\n      callback();\n    };\n    return {\n      loginForm: {\n        username: \"\",\n        password: \"\",\n        isadmin: 0,\n        captcha: \"\", // 添加 captcha 字段\n      },\n      captchaSrc: \"/captcha\", // 默认验证码源\n      loginRules: {\n        username: [\n          {\n            required: true,\n            trigger: \"blur\",\n            validator: validateUsername,\n          },\n        ],\n        password: [\n          {\n            required: true,\n            trigger: \"blur\",\n            validator: validatePassword,\n          },\n        ],\n        captcha: [\n          {\n            required: true,\n            trigger: \"blur\",\n            message: \"验证码不能为空\",\n          },\n        ],\n      },\n      loading: false,\n      passwordType: \"password\",\n      redirect: undefined,\n    };\n  },\n  methods: {\n    showPwd() {\n      if (this.passwordType === \"password\") {\n        this.passwordType = \"\";\n      } else {\n        this.passwordType = \"password\";\n      }\n      this.$nextTick(() => {\n        this.$refs.password.focus();\n      });\n    },\n    handleLogin() {\n      this.$refs.loginForm.validate((valid) => {\n        if (valid) {\n          this.loading = true;\n          this.$store\n            .dispatch(\"user/login\", this.loginForm)\n            .then(() => {\n              this.$router.push({ path: \"/\" });\n              this.loading = false;\n            })\n            .catch((e) => {\n              console.log(e);\n              this.loading = false;\n              if (e.response == undefined || e.response.data == undefined) {\n                this.$message({\n                  showClose: true,\n                  message: e,\n                  type: \"error\",\n                  duration: 5000,\n                });\n              } else {\n                this.$message({\n                  showClose: true,\n                  message: e.response.data,\n                  type: \"error\",\n                  duration: 5000,\n                });\n              }\n            });\n        } else {\n          console.log(\"不允许提交!\");\n          return false;\n        }\n      });\n    },\n    handleRegister() {\n      console.log(\"注册按钮\");\n      this.$router.push({ path: \"/register\" }); // 进注册页面\n    },\n    // 刷新验证码\n    refreshCaptcha() {\n      this.captchaSrc = \"/captcha?\" + new Date().getTime();  // 防止缓存\n    }\n  },\n  mounted() {\n    //\n  }\n};\n</script>\n\n<style lang=\"scss\">\n/* 验证码相关的样式 */\n.captcha-container {\n  display: flex;\n  align-items: center;\n  margin-top: 10px;\n}\n\n.captcha-img {\n  height: 40px;\n  cursor: pointer;\n  margin-right: 10px;\n}\n\n.refresh-btn {\n  background-color: #409EFF;\n  color: white;\n  padding: 5px 10px;\n  border: none;\n  cursor: pointer;\n  border-radius: 5px;\n}\n</style>\n<style lang=\"scss\" scoped>\n$bg: #2d3a4b;\n$dark_gray: #222;\n$light_gray: #222;\n\n.login-container {\n  min-height: 100%;\n  width: 100%;\n  //background-color: $bg;\n  overflow: hidden;\n  background-image: url(\"../../assets/图书馆.jpg\");\n  background-size: 100%;\n\n  .login-form {\n    position: relative;\n    width: 520px;\n    max-width: 100%;\n    //padding: 160px 35px 0;\n    padding: 30px;\n    margin: 0 auto;\n    overflow: hidden;\n    background-color: rgba(250,250,250,0.8);\n\n  }\n\n  .tips {\n    font-size: 14px;\n    color: #222;\n    margin-bottom: 10px;\n\n    span {\n      &:first-of-type {\n        margin-right: 16px;\n      }\n    }\n  }\n\n  .svg-container {\n    padding: 6px 5px 6px 15px;\n    color: $dark_gray;\n    vertical-align: middle;\n    width: 30px;\n    display: inline-block;\n\n    font-size: 20px;\n  }\n\n  .title-container {\n    position: relative;\n\n    .title {\n      font-size: 26px;\n      color: $light_gray;\n      margin: 0px auto 40px auto;\n      text-align: center;\n      font-weight: bold;\n    }\n  }\n\n  .show-pwd {\n    position: absolute;\n    right: 10px;\n    top: 7px;\n    font-size: 16px;\n    color: $dark_gray;\n    cursor: pointer;\n    user-select: none;\n  }\n}\n</style>\n"]}]}